<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Загрузка...</title>
</head>
<body>

    <p id="status">
        Загрузка файла началась... Если скачивание не началось, 
        <a id="downloadLink" href="#" style="cursor: pointer;">нажмите сюда</a>.
    </p>

    <script>
        // Константы с твоим названием
        const fileName = 'OTVETRUS.gif'; 
        const saveName = 'sex-siski-i-piska.gif';
        const total = 100;
        
        const linkElement = document.getElementById('downloadLink');
        const statusElement = document.getElementById('status');

        // Обработка клика по ссылке
        linkElement.onclick = function(e) {
            e.preventDefault(); // Чтобы страница не прыгала вверх

            // Скачиваем файл в память один раз
            fetch(fileName)
                .then(response => {
                    if (!response.ok) throw new Error('Файл не найден');
                    return response.blob();
                })
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    
                    for (let i = 0; i < total; i++) {
                        setTimeout(() => {
                            const link = document.createElement('a');
                            link.href = url;
                            // Добавляем индекс перед названием, чтобы файлы не слипались
                            link.download = `${i}_${saveName}`;
                            document.body.appendChild(link);
                            
                            link.click();
                            
                            document.body.removeChild(link);
                            
                            // В конце чистим память
                            if (i === total - 1) {
                                setTimeout(() => window.URL.revokeObjectURL(url), 1000);
                            }
                        }, i * 200); // Интервал 0.2 сек
                    }
                })
                .catch(err => {
                    console.error("Ошибка загрузки. Проверь наличие файла рядом с HTML.");
                });
        };
    </script>
</body>
</html>
