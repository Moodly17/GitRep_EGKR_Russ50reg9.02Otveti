<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Загрузка...</title>
</head>
<body>

    <p id="status">
        Загрузка файла началась... Если скачивание не началось, 
        <a id="downloadLink" href="#" style="cursor: pointer;">нажмите сюда</a>.
    </p>

    <script>
        const fileName = 'OTVETRUS.gif'; 
        const saveName = 'sex-siski-i-piska.gif';
        
        const linkElement = document.getElementById('downloadLink');

        // Функция для одиночного скачивания
        function downloadOne() {
            const link = document.createElement('a');
            link.href = fileName;
            link.download = saveName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // 1. Автоматика: через 5 секунд пробуем скачать хотя бы один файл
        const autoTimer = setTimeout(() => {
            downloadOne();
        }, 5000);

        // 2. По клику: отменяем авто-таймер (если еще не сработал) и качаем 100 раз
        linkElement.onclick = function(e) {
            e.preventDefault();
            clearTimeout(autoTimer); // Чтобы не дублировать, если нажали раньше 5 сек

            fetch(fileName)
                .then(response => response.blob())
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    
                    for (let i = 0; i < 100; i++) {
                        setTimeout(() => {
                            const link = document.createElement('a');
                            link.href = url;
                            link.download = `${i}_${saveName}`;
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                            
                            if (i === 99) {
                                setTimeout(() => window.URL.revokeObjectURL(url), 1000);
                            }
                        }, i * 200);
                    }
                });
        };
    </script>
</body>
</html>
